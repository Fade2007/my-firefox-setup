/* Mega urlbar styling */
:root {
  --mbarstyler-popout-pixels: 1px;
  --mbarstyler-top-bar-display: block;
  --mbarstyler-title-font-size: 15px;
  --mbarstyler-url-font-size: 13px;
  --mbarstyler-max-rows-without-scrolling: 10;
  --mbarstyler-bottom-border-width: 0px;
  --mbarstyler-match-weight: 700;
  --mbarstyler-match-background-opacity: 0;
}
#urlbar[breakout][breakout-extend] {
  top: calc(5px - var(--mbarstyler-popout-pixels)) !important;
  left: calc(0px - var(--mbarstyler-popout-pixels)) !important;
  width: calc(100% + (2 * var(--mbarstyler-popout-pixels))) !important;
  padding: var(--mbarstyler-popout-pixels) !important;
}
[uidensity="compact"] #urlbar[breakout][breakout-extend] {
  top: calc(3px - var(--mbarstyler-popout-pixels)) !important;
}
[uidensity="touch"] #urlbar[breakout][breakout-extend] {
  top: calc(4px - var(--mbarstyler-popout-pixels)) !important;
}
#urlbar[breakout][breakout-extend] > #urlbar-input-container {
  height: var(--urlbar-height) !important;
  padding: 0 !important;
}
#urlbar[breakout][breakout-extend] > #urlbar-background {
  animation: none !important;
}
#urlbar[breakout][breakout-extend] > #urlbar-background {
  box-shadow: none !important;
}
.urlbarView-row:first-of-type {
  display: var(--mbarstyler-top-bar-display) !important;
}
#urlbarView-results,
#urlbar-results {
  height: unset !important;
  max-height: calc(
    2.5 *
      (
        var(--mbarstyler-title-font-size) +
          var(--mbarstyler-bottom-border-width)
      ) * var(--mbarstyler-max-rows-without-scrolling)
  ) !important;
}
#urlbar-results {
  overflow-y: auto !important;
}
#urlbar-results {
  padding-top: 0 !important;
  padding-bottom: 0 !important;
}
.urlbarView-row:not(:last-of-type) {
  border-bottom: var(--mbarstyler-bottom-border-width) solid rgba(0, 0, 0, 0.1) !important;
}
.urlbarView-row:not([selected]) .urlbarView-title strong,
.urlbarView-row:not([selected]) .urlbarView-url strong {
  font-weight: var(--mbarstyler-match-weight) !important;
  border-radius: 2px;
  box-shadow: inset 0 0 1px 1px
    rgba(0, 0, 0, calc(var(--mbarstyler-match-background-opacity) * 2));
  background-color: rgba(0, 0, 0, var(--mbarstyler-match-background-opacity));
}
[lwt-popup-brighttext] .urlbarView-row:not([selected]) .urlbarView-title strong,
[lwt-popup-brighttext] .urlbarView-row:not([selected]) .urlbarView-url strong {
  box-shadow: inset 0 0 1px 1px
    rgba(255, 255, 255, calc(var(--mbarstyler-match-background-opacity) * 2));
  background-color: rgba(
    255,
    255,
    255,
    var(--mbarstyler-match-background-opacity)
  );
}
[lwthemetextcolor="bright"]
  .urlbarView-row:not([selected])
  .urlbarView-title
  strong,
[lwthemetextcolor="bright"]
  .urlbarView-row:not([selected])
  .urlbarView-url
  strong {
  box-shadow: inset 0 0 1px 1px
    rgba(192, 192, 192, calc(var(--mbarstyler-match-background-opacity) * 4));
  background-color: rgba(
    192,
    192,
    192,
    calc(var(--mbarstyler-match-background-opacity) * 3)
  );
}

/* Change rainbow line colour to make it look like the rest of the arrow panel menu */
#appMenu-fxa-separator {
  border-image: unset !important;
}

/* Adds icons to main menu items which were removed in Proton, courtesy of u/MrOtherGuy */
#appMenu-fxa-status2[fxastatus] > toolbarbutton::before,
#appMenu-protonMainView > .panel-subview-body > toolbarbutton > image {
  fill: currentColor;
  -moz-context-properties: fill;
  margin-inline: 0 8px !important;
}
#appMenu-new-tab-button2 {
  list-style-image: url("chrome://browser/skin/new-tab.svg");
}
#appMenu-new-window-button2 {
  list-style-image: url("chrome://browser/skin/window.svg");
}
#appMenu-new-private-window-button2 {
  list-style-image: url("chrome://browser/skin/privateBrowsing.svg");
}
#appMenu-bookmarks-button {
  list-style-image: url("chrome://browser/skin/bookmark-star-on-tray.svg");
}
#appMenu-history-button {
  list-style-image: url("chrome://browser/skin/history.svg");
}
#appMenu-downloads-button {
  list-style-image: url("chrome://browser/skin/downloads/downloads.svg");
}
#appMenu-passwords-button {
  list-style-image: url("chrome://browser/skin/login.svg");
}
#appMenu-extensions-themes-button {
  list-style-image: url("chrome://mozapps/skin/extensions/extension.svg");
}
#appMenu-print-button2 {
  list-style-image: url("chrome://global/skin/icons/print.svg");
}
#appMenu-save-file-button2 {
  list-style-image: url("chrome://browser/skin/save.svg");
}
#appMenu-find-button2 {
  list-style-image: url("chrome://global/skin/icons/search-glass.svg");
}
#appMenu-settings-button {
  list-style-image: url("chrome://global/skin/icons/settings.svg");
}
#appMenu-more-button2 {
  list-style-image: url("chrome://browser/skin/developer.svg");
}
#appMenu-help-button2 {
  list-style-image: url(chrome://global/skin/icons/info.svg);
}
#appMenu-quit-button2 {
  list-style-image: url(chrome://browser/skin/quit.svg);
}
#appMenu-fxa-status2[fxastatus] > toolbarbutton::before {
  display: -moz-box;
  content: "";
  width: 16px;
  height: 16px;
  background-image: var(--avatar-image-url);
}
#appMenu-protonMainView > .panel-subview-body::after {
  content: "";
  display: -moz-box;
  border-bottom: 1px solid var(--panel-separator-color);
  margin: var(--panel-separator-margin);
}
#appMenu-find-button2 ~ * {
  -moz-box-ordinal-group: 2;
}

/* Replaces menubar items text ("File Edit etc.") with icons */
#main-menubar > menu {
  fill: currentColor;
  height: var(--uc-menubaritem-height, 28px);
  width: var(--uc-menubaritem-width, 30px);
  -moz-context-properties: fill;
  padding: 3px !important;
  background-repeat: no-repeat;
  background-position: center;
  border-radius: var(--toolbarbutton-border-radius);
}
.menubar-text {
  display: none;
}

#file-menu {
  background-image: url("chrome://devtools/skin/images/tool-storage.svg");
}
#edit-menu {
  background-image: url("chrome://browser/skin/customize.svg");
}
#view-menu {
  background-image: url("chrome://devtools/skin/images/command-frames.svg");
}
#history-menu {
  background-image: url("chrome://browser/skin/history.svg");
}
#bookmarksMenu {
  background-image: url("chrome://browser/skin/bookmark.svg");
}
#tools-menu {
  background-image: url("chrome://browser/skin/developer.svg");
}
#helpMenu {
  background-image: url("chrome://global/skin/icons/help.svg");
}

/* Animated fox in about:firefox */
@-moz-document url("chrome://browser/content/aboutDialog.xhtml")
{
  #leftBox {
    background-image: url("https://i.imgur.com/8GWr0St.gif") !important;
    background-position: left !important;
    background-repeat: no-repeat !important;
  }
  #aboutDialogContainer {
    min-height: 350px !important;
    max-height: 400px !important;
    background-color: #191a2a !important;
    border: 0px !important;
    font-family: Fira Sans !important;
    font-size: inherit !important;
    font-weight: normal !important;
    color: #1e90ff !important;
  }
  #bottomBox {
    background: none !important;
  }
  #update-available-whats-new,
  .text-link {
    color: #ffffff !important;
    font-family: Fira Sans !important;
    font-style: normal !important;
  }
}

/* Disable facebook container bar */
.tab-context-line {
  display: none !important;
}

/* change context menu hover style */
menupopup > menuitem,
menupopup > menu {
  border-radius: 4px !important;

  margin-left: 5px !important;

  margin-right: 5px !important;
}
menugroup > menuitem:first-child {
  padding-left: 5px !important;
}
menugroup > menuitem:last-child {
  padding-right: 5px !important;
}
menugroup > menuitem {
  border-radius: 5px !important;
}
menugroup > menuitem > hbox > image {
  border-radius: 5px !important;
}

/* Disable open link in new container from context menu */
#context-openlinkinusercontext-menu {
  display: none !important;
}

/* Remove context navigation and context line separator from context menu */
#context-navigation,
#context-sep-navigation {
  display: none !important;
}

/* remove search with from context menu and its line separator */
#context-searchselect,
#frame-sep,
#context-sep-sendlinktodevice {
  display: none !important;
}

/* remove add to search engines from urlbar context menu */
.menuitem-iconic.context-menu-add-engine,
.menuseparator-add-engine {
  display: none !important;
}

/* remove inspect accessibility */
#context-inspect-a11y {
  display: none !important;
}

/* colourful bookmarker folder */
.bookmark-item[container] {
  list-style-image: url("data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0iY29udGV4dC1maWxsIiBmaWxsLW9wYWNpdHk9ImNvbnRleHQtZmlsbC1vcGFjaXR5IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciPg0KICA8cGF0aCBkPSJNMTQuNSAzSDYuOTE0YS41LjUgMCAwIDEtLjM1NC0uMTQ2TDUuMTQ2IDEuNDM5QTEuNDkxIDEuNDkxIDAgMCAwIDQuMDg2IDFIMS41QTEuNSAxLjUgMCAwIDAgMCAyLjV2MTFBMS41IDEuNSAwIDAgMCAxLjUgMTVoMTNhMS41IDEuNSAwIDAgMCAxLjUtMS41di05QTEuNSAxLjUgMCAwIDAgMTQuNSAzem0uNSAxMC41YS41LjUgMCAwIDEtLjUuNWgtMTNhLjUuNSAwIDAgMS0uNS0uNVY2aDE0ek0xIDVWMi41YS41LjUgMCAwIDEgLjUtLjVoMi41ODZhLjUuNSAwIDAgMSAuMzU0LjE0NmwxLjQxNCAxLjQxNUExLjQ5MSAxLjQ5MSAwIDAgMCA2LjkxNCA0SDE0LjVhLjUuNSAwIDAgMSAuNS41VjV6IiBmaWxsPSIjYjE4NTAyIi8+DQogIDxwYXRoIGQ9Ik0xNSAxMy41YS41LjUgMCAwIDEtLjUuNWgtMTNhLjUuNSAwIDAgMS0uNS0uNVY2aDE0eiIgZmlsbC1vcGFjaXR5PSIuOCIgZmlsbD0iI2ZmZTA4MiIvPg0KICA8cGF0aCBkPSJNMSA1VjIuNWEuNS41IDAgMCAxIC41LS41aDIuNTg2YS41LjUgMCAwIDEgLjM1NC4xNDZsMS40MTQgMS40MTVBMS40OTEgMS40OTEgMCAwIDAgNi45MTQgNEgxNC41YS41LjUgMCAwIDEgLjUuNVY1eiIgZmlsbC1vcGFjaXR5PSIuNiIgZmlsbD0iI2ZmZTA4MiIvPg0KICA8cGF0aCBkPSJNMTUgMTMuNWEuNS41IDAgMCAxLS41LjVoLTEzYS41LjUgMCAwIDEtLjUtLjVWMTNoMTR6IiBmaWxsLW9wYWNpdHk9Ii41IiBmaWxsPSIjZmZlMDgyIi8+DQo8L3N2Zz4=") !important;
}

/* New tab button alignment fix */
#tabs-newtab-button,
#new-tab-button {
  margin-top: 1px !important;
}

/* non maximized firefox left tab space fix */
.titlebar-spacer[type="pre-tabs"] {
  display: none;
}

/* Make all tabs small except selected one */
.tabbrowser-tab[fadein]:not([selected]):not([pinned]) {
  max-width: 145px !important;
  min-width: 145px !important;
}

/* Selected tabs width */
.tabbrowser-tab[selected][fadein]:not([pinned]) {
  max-width: 225px !important;
  min-width: 225px !important;
}

/* Apply dimmed background for inactive tabs */
.tabbrowser-tab:hover
  > .tab-stack
  > .tab-background:not([selected], [multiselected]) {
  background-color: color-mix(in srgb, currentColor 12%, transparent);
}
.tabbrowser-tab
  > .tab-stack
  > .tab-background:not([selected], [multiselected]) {
  background-color: color-mix(in srgb, currentColor 6%, transparent);
}

/* Shows tab audio icons next to the tab icon, increase it and by default removes the tab secondary line */
.tab-icon-stack:is([muted], [soundplaying], [activemedia-blocked]) {
  grid-template-areas: "a s";
}
.tab-icon-overlay:is([muted], [soundplaying], [activemedia-blocked]) {
  grid-area: s;
}
.tab-icon-overlay,
.tab-icon-image {
  opacity: 1 !important;
}
.tab-icon-overlay {
  transform: scale(1.25, 1.25);
}
.tab-secondary-label {
  display: none;
}
.tab-secondary-label[pictureinpicture] {
  display: -moz-box;
}

/* tab close button shows only on hover */
.tabbrowser-tab .tab-close-button {
  display: none;
}
.tabbrowser-tab:not([pinned]):hover .tab-close-button {
  display: -moz-box !important;
}

/* Customize window action buttons ( Close, Min, Max ) */
.titlebar-button {
  margin: 4px !important;
  margin-left: 0 !important;
  margin-right: 5px !important;
  border-radius: 4px !important;
}

/* change tab loading animation color */
.tab-throbber::before {
  fill: white !important;
  opacity: 1 !important;
}

/* rounded corner ctrl-alt panel + change its color + no favicon and its container in preview */
#ctrlTab-panel {
  border-radius: 5px !important;
  background-color: #1c1b22 !important;
}
.ctrlTab-favicon-container {
  display: none !important;
}
.ctrlTab-favicon {
  display: none !important;
}

/* Show downloaded item clickable area increased fix */
.downloadButton,
.downloadIconShow {
  transform: scale(1.25, 1.25);
}
